<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Parkinson Care Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body {
          font-family: 'Noto Sans KR', sans-serif;
          background-color: #f3f4f6;
          color: #1f2937;
        }
        .chat-container {
          height: calc(100vh - 180px);
        }
        @media (min-width:768px){
          .chat-container {height: calc(100vh - 140px);}
        }
        .typing-indicator::after {
          content: '...';
          animation: typing 1.5s infinite;
        }
        @keyframes typing {
          0% { content: '.'; }
          33% { content: '..'; }
          66% { content: '...'; }
        }
        .gradient-bg {
           background: linear-gradient(135deg,#5568be 0%,#534693 100%);
        }


        .report-card {
          transition: all .3s ease;
        }
        .report-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 20px rgba(0,0,0,.1);
        }
    </style>
</head>
<body>
<!-- Navigation -->
<nav class="gradient-bg text-white shadow-lg">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <i class="fas fa-brain text-2xl"></i>
            <span class="text-xl font-bold">NeuroCare</span>
        </div>
        <div class="md:hidden">
            <button id="mobile-menu-button" class="text-white focus:outline-none">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>
    </div>
</nav>

<!-- Main Content -->
<div class="container mx-auto px-4 py-6">
    <!-- User Profile -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6 flex flex-col md:flex-row items-center">
        <div class="w-24 h-24 rounded-full bg-indigo-100 flex items-center justify-center mb-4 md:mb-0 md:mr-6">
            <i class="fas fa-user text-4xl text-indigo-500"></i>
        </div>
        <div class="text-center md:text-left">
            <h2 class="text-3xl font-bold text-gray-800">ê¹€ë¯¼ìˆ˜ ë‹˜</h2>
            <p class="text-gray-600">  ê¹€ì˜í¬ ë‹˜ ë³´í˜¸ì</p>
            <div class="mt-2 flex justify-center md:justify-start space-x-2">
                <span class="bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full">ë³´í˜¸ì</span>
            </div>
        </div>
        <div class="mt-4 md:mt-0 md:ml-auto">
            <!-- ğŸ‘‡ ëª¨ë‹¬ ì˜¤í”ˆ íŠ¸ë¦¬ê±° -->
            <button id="emergencyBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center">
                <i class="fas fa-phone-alt mr-2"></i> ì‘ê¸‰ í˜¸ì¶œ
            </button>
        </div>
    </div>

    <!-- Tabs -->
    <div class="flex justify-between border-b border-gray-200 mb-6">
        <button id="chat-tab" class="tab-button active py-2 px-2 font-medium text-indigo-600 border-b-2 border-indigo-600">
            <i class="fas fa-comment-dots mr-2"></i> ì±—ë´‡ ìƒë‹´
        </button>
        <button id="report-tab"
                class="tab-button py-2 px-2 font-medium whitespace-nowrap text-gray-500 hover:text-indigo-500 border-b-2 border-transparent">
            <i class="fas fa-cloud-sun mr-2"></i> ë‚´ ë‚ ì”¨
        </button>
        <button id="caregiver-tab" class="tab-button py-2 px-2 font-medium text-gray-500 hover:text-indigo-500">
            <i class="fas fa-user-shield mr-2"></i> ë³´í˜¸ì ëª¨ë“œ
        </button>
    </div>

    <!-- Chat -->
    <div id="chat-section" class="tab-content">
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="gradient-bg text-white p-4 flex items-center">
                <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center mr-3">
                    <i class="fas fa-robot text-indigo-600 text-xl"></i>
                </div>
                <div>
                    <h3 class="font-bold">NeuroCare ì±—ë´‡</h3>
                    <p class="text-xs text-indigo-100">ê³µê°í˜• AI ìƒë‹´ì‚¬</p>
                </div>
                <div class="ml-auto flex space-x-2">
                    <button class="text-white hover:text-indigo-200"><i class="fas fa-microphone"></i></button>
                    <button class="text-white hover:text-indigo-200"><i class="fas fa-volume-up"></i></button>
                </div>
            </div>

            <div class="chat-container p-4 overflow-y-auto">
                <div class="space-y-4">
                    <div class="flex items-start">
                        <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center mr-2 flex-shrink-0">
                            <i class="fas fa-robot text-indigo-600"></i>
                        </div>
                        <div class="bg-indigo-50 rounded-lg p-3 max-w-xs md:max-w-md">
                            <p class="text-gray-800">ì•ˆë…•í•˜ì„¸ìš”, ë¯¼ìˆ˜ë‹˜! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</p>
                            <p class="text-xs text-gray-500 mt-1">ì˜¤ì „ 9:30</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-200 p-4 bg-gray-50">
                <div class="flex items-center">
                    <button class="text-gray-500 hover:text-indigo-600 mr-2"><i class="fas fa-smile text-xl"></i></button>
                    <input id="chatInput" type="text" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." class="flex-1 border border-gray-300 rounded-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    <button id="sendButton" class="ml-2 bg-indigo-600 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-indigo-700">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="mt-2 flex justify-center">
                    <button class="text-xs text-indigo-600 hover:text-indigo-800 flex items-center">
                        <i class="fas fa-microphone mr-1"></i> ìŒì„±ìœ¼ë¡œ ëŒ€í™”í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Report (now empty, content moved to Caregiver) -->
    <div id="report-section" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-2 flex items-center">
                <i class="fas fa-chart-line text-indigo-600 mr-2"></i> ì‹¬ë¦¬ ìƒíƒœ
            </h3>
            <div class="bg-indigo-50 rounded-lg p-6 text-gray-700">
                ì´ ì„¹ì…˜ì˜ ì½˜í…ì¸ ëŠ” <span class="font-semibold text-indigo-700">ë³´í˜¸ì ëª¨ë“œ</span>ë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤.
                ìƒë‹¨ íƒ­ì—ì„œ <span class="font-semibold">ë³´í˜¸ì ëª¨ë“œ</span>ë¥¼ ëˆŒëŸ¬ í™•ì¸í•´ì£¼ì„¸ìš”.
            </div>
        </div>
    </div>

    <!-- Caregiver (includes moved "ì‹¬ë¦¬ ìƒíƒœ ë¶„ì„") -->
    <div id="caregiver-section" class="tab-content hidden">
        <!-- Moved: ì‹¬ë¦¬ ìƒíƒœ ë¶„ì„ -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-chart-pie text-indigo-600 mr-2"></i> (ê¹€ì˜í¬ ë‹˜)ì‹¬ë¦¬ ìƒíƒœ ë¶„ì„
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="report-card bg-white border border-indigo-100 rounded-lg p-4 shadow-sm">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="font-medium text-gray-700">ìš°ìš¸ ì§€ìˆ˜</h4>
                        <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">ë†’ìŒ</span>
                    </div>
                    <div class="h-2 bg-gray-200 rounded-full mb-2">
                        <div class="h-2 bg-red-500 rounded-full" style="width:75%"></div>
                    </div>
                    <p class="text-xs text-gray-500">ì§€ë‚œì£¼ ëŒ€ë¹„ 10% ì¦ê°€</p>
                </div>

                <div class="report-card bg-white border border-indigo-100 rounded-lg p-4 shadow-sm">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="font-medium text-gray-700">ë¶ˆì•ˆ ì§€ìˆ˜</h4>
                        <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">ë³´í†µ</span>
                    </div>
                    <div class="h-2 bg-gray-200 rounded-full mb-2">
                        <div class="h-2 bg-yellow-500 rounded-full" style="width:45%"></div>
                    </div>
                    <p class="text-xs text-gray-500">ì§€ë‚œì£¼ ëŒ€ë¹„ 5% ê°ì†Œ</p>
                </div>

                <div class="report-card bg-white border border-indigo-100 rounded-lg p-4 shadow-sm">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="font-medium text-gray-700">ì¤‘ë…</h4>
                        <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">ë§¤ìš° ë†’ìŒ</span>
                    </div>
                    <div class="h-2 bg-gray-200 rounded-full mb-2">
                        <div class="h-2 bg-purple-500 rounded-full" style="width:85%"></div>
                    </div>
                    <p class="text-xs text-gray-500">ì§€ë‚œì£¼ ëŒ€ë¹„ 15% ì¦ê°€</p>
                </div>
            </div>

            <div>
                <h4 class="font-bold text-gray-700 mb-3">ì‹¬ë¦¬ ìƒíƒœ ìš”ì•½</h4>
                <p id="summaryText" class="text-gray-800"></p>
            </div>
        </div>

        <!-- Caregiver info -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                <i class="fas fa-user-shield text-indigo-600 mr-2"></i> ê°€ì¡± ì •ë³´
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-bold text-gray-700 mb-3">ê°€ì¡±</h4>
                    <div class="bg-indigo-50 rounded-lg p-4">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center mr-3">
                                <i class="fas fa-user text-indigo-600"></i>
                            </div>
                            <div>
                                <p class="font-medium">ê¹€ì˜í¬</p>
                                <p class="text-sm text-gray-600">ì—„ë§ˆ, 010-1234-5678</p>
                            </div>
                        </div>
                        <button class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg">
                            <i class="fas fa-phone-alt mr-2"></i> ì „í™”í•˜ê¸°
                        </button>
                    </div>
                </div>

                <div>
                    <h4 class="font-bold text-gray-700 mb-3">ìµœê·¼ ì•Œë¦¼ ì „ì†¡ ë‚´ì—­</h4>
                    <div class="space-y-3">
                        <div class="bg-white border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-1">
                                <p class="font-medium text-sm">ìš°ìš¸ ì§€ìˆ˜ ì¦ê°€ ì•Œë¦¼</p>
                                <span class="text-xs text-gray-500">ì–´ì œ ì˜¤í›„ 3:20</span>
                            </div>
                            <p class="text-xs text-gray-600">ìš°ìš¸ ì§€ìˆ˜ê°€ 75%ë¡œ ìœ„í—˜ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ì—°ë½ì„ ì·¨í•´ì£¼ì„¸ìš”.</p>
                        </div>
                        <div class="bg-white border border-gray-200 rounded-lg p-3">
                            <div class="flex justify-between items-start mb-1">
                                <p class="font-medium text-sm">ì‘ê¸‰ í˜¸ì¶œ ì•Œë¦¼</p>
                                <span class="text-xs text-gray-500">3ì¼ ì „ ì˜¤ì „ 11:05</span>
                            </div>
                            <p class="text-xs text-gray-600">ì‘ê¸‰ í˜¸ì¶œì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification settings -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-bell text-indigo-600 mr-2"></i> ì•Œë¦¼ ì„¤ì •
            </h3>

            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="font-medium text-gray-700">ìš°ìš¸ ì§€ìˆ˜ ì¦ê°€ ì•Œë¦¼</p>
                        <p class="text-xs text-gray-500">ìš°ìš¸ ì§€ìˆ˜ê°€ 60% ì´ìƒì¼ ë•Œ ì•Œë¦¼</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                </div>

                <div class="flex items-center justify-between">
                    <div>
                        <p class="font-medium text-gray-700">ì‘ê¸‰ í˜¸ì¶œ ì•Œë¦¼</p>
                        <p class="text-xs text-gray-500">ì‘ê¸‰ í˜¸ì¶œ ë²„íŠ¼ ì‚¬ìš© ì‹œ ì•Œë¦¼</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                </div>

                <div class="flex items-center justify-between">
                    <div>
                        <p class="font-medium text-gray-700">ì¼ì¼ ì‹¬ë¦¬ ìƒíƒœ ë³´ê³ </p>
                        <p class="text-xs text-gray-500">ë§¤ì¼ ì˜¤í›„ 7ì‹œì— ìš”ì•½ ë³´ê³ ì„œ ë°œì†¡</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                </div>
            </div>

            <div class="mt-6">
                <button class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg">
                    <i class="fas fa-save mr-2"></i> ì„¤ì • ì €ì¥
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Bottom Navigation (Mobile) -->
<div class="md-hidden fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 md:hidden">
    <div class="flex justify-around">
        <a href="#chat" class="flex flex-col items-center py-2 px-4 text-indigo-600">
            <i class="fas fa-comment-dots text-xl"></i><span class="text-xs mt-1">ì±—ë´‡</span>
        </a>
        <a href="#report" class="flex flex-col items-center py-2 px-4 text-gray-500">
            <i class="fas fa-cloud-sun text-xl"></i><span class="text-xs mt-1">ë‚ ì”¨</span>
        </a>
        <a href="#caregiver" class="flex flex-col items-center py-2 px-4 text-gray-500">
            <i class="fas fa-user-shield text-xl"></i><span class="text-xs mt-1">ë³´í˜¸ì</span>
        </a>
        <a href="#settings" class="flex flex-col items-center py-2 px-4 text-gray-500">
            <i class="fas fa-cog text-xl"></i><span class="text-xs mt-1">ì„¤ì •</span>
        </a>
    </div>
</div>

<!-- âœ… HTML ëª¨ë‹¬ -->
<div id="emergencyModal" class="hidden fixed inset-0 z-50">
    <!-- backdrop -->
    <div id="modalBackdrop" class="absolute inset-0 bg-black/40"></div>
    <!-- modal panel -->
    <div class="absolute inset-0 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl max-w-sm w-full p-6">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center">
                    <i class="fas fa-bell text-indigo-600"></i>
                </div>
                <h4 class="text-lg font-bold text-gray-800">ì‘ê¸‰ í˜¸ì¶œ ì „ì†¡</h4>
            </div>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ì‘ê¸‰ í˜¸ì¶œì´ ë³´í˜¸ìì—ê²Œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ê³§ ì—°ë½ì´ ì˜¬ ê±°ì˜ˆìš”.
            </p>
            <div class="mt-6 flex justify-end">
                <button id="modalCloseBtn" class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700">í™•ì¸</button>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script>
    // Mobile menu toggle
    document.getElementById('mobile-menu-button').addEventListener('click', () => {
      document.getElementById('mobile-menu').classList.toggle('hidden');
    });

    // Tab switching
    const tabs = ['chat','report','caregiver'];
    tabs.forEach(tab=>{
      const tabButton = document.getElementById(`${tab}-tab`);
      const tabSection = document.getElementById(`${tab}-section`);
      tabButton.addEventListener('click',()=>{
        document.querySelectorAll('.tab-content').forEach(c=>c.classList.add('hidden'));
        document.querySelectorAll('.tab-button').forEach(b=>{
          b.classList.remove('active','text-indigo-600','border-indigo-600');
          b.classList.add('text-gray-500');
        });
        tabSection.classList.remove('hidden');
        tabButton.classList.add('active','text-indigo-600','border-indigo-600');
        tabButton.classList.remove('text-gray-500');
      });
    });

    // ëª¨ë‹¬ ì œì–´
    const emergencyBtn = document.getElementById('emergencyBtn');
    const emergencyModal = document.getElementById('emergencyModal');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    const modalBackdrop = document.getElementById('modalBackdrop');

    function openModal(){ emergencyModal.classList.remove('hidden'); document.body.style.overflow='hidden'; }
    function closeModal(){ emergencyModal.classList.add('hidden'); document.body.style.overflow=''; }

    emergencyBtn.addEventListener('click', (e)=>{ e.preventDefault(); openModal(); });
    modalCloseBtn.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', closeModal);
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    // ì±„íŒ… ì „ì†¡
    const chatInput = document.getElementById('chatInput');
    const sendButton = document.getElementById('sendButton');
    const chatContainer = document.querySelector('.chat-container .space-y-4');

    async function sendMessage(){
      const message = chatInput.value.trim();
      if(!message) return;

      // ì‚¬ìš©ì ë©”ì‹œì§€
      const userMsgDiv = document.createElement('div');
      userMsgDiv.className = 'flex justify-end';
      userMsgDiv.innerHTML = `
        <div class="bg-indigo-600 rounded-lg p-3 max-w-xs md:max-w-md">
          <p class="text-white">${message}</p>
          <p class="text-xs text-indigo-200 mt-1">ì§€ê¸ˆ</p>
        </div>`;
      chatContainer.appendChild(userMsgDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
      chatInput.value = '';

      // ìë¦¬ í‘œì‹œ
      const botMsgDiv = document.createElement('div');
      botMsgDiv.className = 'flex items-start';
      botMsgDiv.innerHTML = `
        <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center mr-2 flex-shrink-0">
          <i class="fas fa-robot text-indigo-600"></i>
        </div>
        <div class="bg-indigo-50 rounded-lg p-3 max-w-xs md:max-w-md">
          <p class="text-gray-800 typing-indicator">...</p>
        </div>`;
      chatContainer.appendChild(botMsgDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;

      // FastAPI í˜¸ì¶œ
      try{
        const response = await fetch('http://localhost:8000/api/chatbot/',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({message})
        });
        const data = await response.json();

        const typingP = botMsgDiv.querySelector('.typing-indicator');
        if(typingP){
          typingP.textContent = data.reply ?? 'ì‘ë‹µì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.';
          const timestamp = document.createElement('p');
          timestamp.className = 'text-xs text-gray-500 mt-1';
          const now = new Date();
          const h = now.getHours(); const hours = h>12? h-12 : h; const ampm = h>=12? 'ì˜¤í›„':'ì˜¤ì „';
          const minutes = now.getMinutes().toString().padStart(2,'0');
          timestamp.textContent = `${ampm} ${hours}:${minutes}`;
          typingP.parentNode.appendChild(timestamp);
        }
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }catch(err){
        console.error('Error:',err);
        const typingP = botMsgDiv.querySelector('.typing-indicator');
        if(typingP) typingP.textContent = "ì‘ë‹µì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
      }
    }

    sendButton.addEventListener('click', sendMessage);
    chatInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') sendMessage(); });

</script>
</body>
</html>

<script>
    async function loadSummary() {
        try {
            const response = await fetch('http://localhost:8000/api/summary', {
                method: 'POST',
            });
            const data = await response.json();
            const summaryP = document.getElementById('summaryText');
            if(summaryP) {
                // ì¤„ë°”ê¿ˆ ë³€í™˜
                summaryP.innerHTML = data.summary.replace(/\n/g, '<br>');
            }
        } catch(err) {
            console.error('Summary fetch error:', err);
        }
    }

document.getElementById('caregiver-tab')?.addEventListener('click', loadSummary);
</script>
